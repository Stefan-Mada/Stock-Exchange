<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Stock Exchange: src/orderBook.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Stock Exchange
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">orderBook.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="orderBook_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160; </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#ifndef ORDERBOOK_HPP</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#define ORDERBOOK_HPP</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160; </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="limitPrice_8hpp.html">limitPrice.hpp</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;unordered_map&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">namespace </span>Exchange {</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="structExchange_1_1OrderBook.html">   28</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structExchange_1_1OrderBook.html">OrderBook</a> {</div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="structExchange_1_1OrderBook.html#a96865e5ce18a3d9af8dc165944b9b8fe">   33</a></span>&#160;    <a class="code" href="structExchange_1_1OrderBook.html#a96865e5ce18a3d9af8dc165944b9b8fe">OrderBook</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keyword">auto</span> <a class="code" href="structExchange_1_1OrderBook.html#ab217a9765ab2a66fc2f254926c0bc936">addOrder</a>(<a class="code" href="order_8hpp.html#aae710f74be787a2593a5a67d74d16841">OrderType</a> orderType, <span class="keywordtype">int</span> shares, <span class="keywordtype">int</span> limitPrice,</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                  <span class="keywordtype">int</span> timeInForce = 0) -&gt; <a class="code" href="structExchange_1_1OrderExecution.html">OrderExecution</a>;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structExchange_1_1OrderBook.html#a5b23fcc3d9debb8032e1f77b81ea86ad">cancelOrder</a>(<span class="keywordtype">int</span> orderId);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    [[nodiscard]] <span class="keyword">auto</span> <a class="code" href="structExchange_1_1OrderBook.html#a334ad4945c918e1fcda5b5ae7b672c5f">getVolumeAtLimit</a>(<span class="keywordtype">int</span> price) <span class="keyword">const</span> -&gt; int;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    [[nodiscard]] <span class="keyword">auto</span> <a class="code" href="structExchange_1_1OrderBook.html#a499dc6de563b682005dd396d28b209c1">getBestBid</a>() const -&gt; std::optional&lt;<span class="keywordtype">int</span>&gt;;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    [[nodiscard]] auto <a class="code" href="structExchange_1_1OrderBook.html#a656c26c5099c878050c9b6daad2a2c85">getBestAsk</a>() const -&gt; std::optional&lt;<span class="keywordtype">int</span>&gt;;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    [[nodiscard]] auto <a class="code" href="structExchange_1_1OrderBook.html#a5b9e745da12d7cb5efb9303acd9fcd7c">getTotalVolume</a>() const -&gt; <span class="keywordtype">int</span>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  private:</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    auto <a class="code" href="structExchange_1_1OrderBook.html#ab217a9765ab2a66fc2f254926c0bc936">addOrder</a>(const <a class="code" href="structExchange_1_1Order.html">Order</a> &amp;order) -&gt; <a class="code" href="structExchange_1_1OrderExecution.html">OrderExecution</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    auto executeOrder(const <a class="code" href="structExchange_1_1Order.html">Order</a> &amp;order) -&gt; <a class="code" href="structExchange_1_1OrderExecution.html">OrderExecution</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    [[nodiscard]] auto isExecutable(const <a class="code" href="structExchange_1_1Order.html">Order</a> &amp;order) const -&gt; <span class="keywordtype">bool</span>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordtype">void</span> removeLimitMap(<span class="keywordtype">int</span> price, <a class="code" href="order_8hpp.html#aae710f74be787a2593a5a67d74d16841">OrderType</a> orderType);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    std::map&lt;<span class="keywordtype">int</span>, <a class="code" href="structExchange_1_1LimitPrice.html">LimitPrice</a>&gt; buyMap;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    std::map&lt;<span class="keywordtype">int</span>, <a class="code" href="structExchange_1_1LimitPrice.html">LimitPrice</a>&gt; sellMap;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="comment">// This is used when no more orders exist in a LimitPrice,</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="comment">// Necessary in order to keep storing information about volume, etc</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    std::unordered_map&lt;<span class="keywordtype">int</span>, <a class="code" href="structExchange_1_1LimitPrice.html">LimitPrice</a>&gt; archivedLimitMaps;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    std::unordered_map&lt;<span class="keywordtype">int</span>, std::list&lt;<a class="code" href="structExchange_1_1Order.html">Order</a>&gt;::iterator&gt; idToOrderIteratorMap;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    std::unordered_map&lt;<span class="keywordtype">int</span>, <a class="code" href="structExchange_1_1LimitPrice.html">LimitPrice</a>&amp;&gt; priceToLimitMap;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordtype">int</span> totalVolume = 0;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordtype">int</span> currentOrderId = 0;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;};</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;} <span class="comment">// namespace Exchange</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="ttc" id="alimitPrice_8hpp_html"><div class="ttname"><a href="limitPrice_8hpp.html">limitPrice.hpp</a></div><div class="ttdoc">Header file for the limit price data structure.</div></div>
<div class="ttc" id="aorder_8hpp_html_aae710f74be787a2593a5a67d74d16841"><div class="ttname"><a href="order_8hpp.html#aae710f74be787a2593a5a67d74d16841">Exchange::OrderType</a></div><div class="ttdeci">OrderType</div><div class="ttdoc">Order types possible for an order: currently buy or sell.</div><div class="ttdef"><b>Definition:</b> order.hpp:23</div></div>
<div class="ttc" id="astructExchange_1_1LimitPrice_html"><div class="ttname"><a href="structExchange_1_1LimitPrice.html">Exchange::LimitPrice</a></div><div class="ttdoc">The Limit Price struct, which holds information for all orders at a given limit price.</div><div class="ttdef"><b>Definition:</b> limitPrice.hpp:24</div></div>
<div class="ttc" id="astructExchange_1_1OrderBook_html"><div class="ttname"><a href="structExchange_1_1OrderBook.html">Exchange::OrderBook</a></div><div class="ttdoc">Limit order book data structure.</div><div class="ttdef"><b>Definition:</b> orderBook.hpp:28</div></div>
<div class="ttc" id="astructExchange_1_1OrderBook_html_a334ad4945c918e1fcda5b5ae7b672c5f"><div class="ttname"><a href="structExchange_1_1OrderBook.html#a334ad4945c918e1fcda5b5ae7b672c5f">Exchange::OrderBook::getVolumeAtLimit</a></div><div class="ttdeci">auto getVolumeAtLimit(int price) const -&gt; int</div><div class="ttdoc">Get the volume at a specific limit price.</div><div class="ttdef"><b>Definition:</b> orderBook.cpp:92</div></div>
<div class="ttc" id="astructExchange_1_1OrderBook_html_a499dc6de563b682005dd396d28b209c1"><div class="ttname"><a href="structExchange_1_1OrderBook.html#a499dc6de563b682005dd396d28b209c1">Exchange::OrderBook::getBestBid</a></div><div class="ttdeci">auto getBestBid() const -&gt; std::optional&lt; int &gt;</div><div class="ttdoc">Get the best bidding price.</div><div class="ttdef"><b>Definition:</b> orderBook.cpp:102</div></div>
<div class="ttc" id="astructExchange_1_1OrderBook_html_a5b23fcc3d9debb8032e1f77b81ea86ad"><div class="ttname"><a href="structExchange_1_1OrderBook.html#a5b23fcc3d9debb8032e1f77b81ea86ad">Exchange::OrderBook::cancelOrder</a></div><div class="ttdeci">void cancelOrder(int orderId)</div><div class="ttdoc">Cancel order with given orderId.</div><div class="ttdef"><b>Definition:</b> orderBook.cpp:45</div></div>
<div class="ttc" id="astructExchange_1_1OrderBook_html_a5b9e745da12d7cb5efb9303acd9fcd7c"><div class="ttname"><a href="structExchange_1_1OrderBook.html#a5b9e745da12d7cb5efb9303acd9fcd7c">Exchange::OrderBook::getTotalVolume</a></div><div class="ttdeci">auto getTotalVolume() const -&gt; int</div><div class="ttdoc">Get the total volume traded in this orderBook.</div><div class="ttdef"><b>Definition:</b> orderBook.cpp:116</div></div>
<div class="ttc" id="astructExchange_1_1OrderBook_html_a656c26c5099c878050c9b6daad2a2c85"><div class="ttname"><a href="structExchange_1_1OrderBook.html#a656c26c5099c878050c9b6daad2a2c85">Exchange::OrderBook::getBestAsk</a></div><div class="ttdeci">auto getBestAsk() const -&gt; std::optional&lt; int &gt;</div><div class="ttdoc">Get the best asking price.</div><div class="ttdef"><b>Definition:</b> orderBook.cpp:109</div></div>
<div class="ttc" id="astructExchange_1_1OrderBook_html_a96865e5ce18a3d9af8dc165944b9b8fe"><div class="ttname"><a href="structExchange_1_1OrderBook.html#a96865e5ce18a3d9af8dc165944b9b8fe">Exchange::OrderBook::OrderBook</a></div><div class="ttdeci">OrderBook()=default</div><div class="ttdoc">Construct an empty OrderBook object.</div></div>
<div class="ttc" id="astructExchange_1_1OrderBook_html_ab217a9765ab2a66fc2f254926c0bc936"><div class="ttname"><a href="structExchange_1_1OrderBook.html#ab217a9765ab2a66fc2f254926c0bc936">Exchange::OrderBook::addOrder</a></div><div class="ttdeci">auto addOrder(OrderType orderType, int shares, int limitPrice, int timeInForce=0) -&gt; OrderExecution</div><div class="ttdoc">Adds a new order to the OrderBook.</div><div class="ttdef"><b>Definition:</b> orderBook.cpp:16</div></div>
<div class="ttc" id="astructExchange_1_1OrderExecution_html"><div class="ttname"><a href="structExchange_1_1OrderExecution.html">Exchange::OrderExecution</a></div><div class="ttdoc">Represents all orders executed to fulfill one submitted order (the base order)</div><div class="ttdef"><b>Definition:</b> orderExecution.hpp:29</div></div>
<div class="ttc" id="astructExchange_1_1Order_html"><div class="ttname"><a href="structExchange_1_1Order.html">Exchange::Order</a></div><div class="ttdoc">The Order struct, which holds all necessary information for a single order.</div><div class="ttdef"><b>Definition:</b> order.hpp:32</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
